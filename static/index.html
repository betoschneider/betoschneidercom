<!DOCTYPE html>
<html lang="pt-BR" class="dark">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Beto Schneider | Dev Portfolio</title>
    <link rel="canonical" href="https://betoschneider.com/" />
    <link rel="icon"
        href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üíª</text></svg>">

    <!-- Fonts & Icons -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Scripts -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Outfit', 'sans-serif'],
                    },
                    colors: {
                        primary: {
                            50: '#eff6ff',
                            100: '#dbeafe',
                            200: '#bfdbfe',
                            300: '#93c5fd',
                            400: '#60a5fa',
                            500: '#3b82f6',
                            600: '#2563eb',
                            700: '#1d4ed8',
                            800: '#1e40af',
                            900: '#1e3a8a',
                        },
                    },
                    animation: {
                        'gradient-x': 'gradient-x 15s ease infinite',
                        'float': 'float 6s ease-in-out infinite',
                    },
                    keyframes: {
                        'gradient-x': {
                            '0%, 100%': { 'background-size': '200% 200%', 'background-position': 'left center' },
                            '50%': { 'background-size': '200% 200%', 'background-position': 'right center' },
                        },
                        'float': {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-20px)' },
                        }
                    }
                }
            }
        }
    </script>

    <!-- React & Framer Motion -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/react-router-dom@5.3.4/umd/react-router-dom.min.js" crossorigin></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://unpkg.com/framer-motion@10.16.4/dist/framer-motion.js"></script>

    <style>
        :root {
            --accent: #3b82f6;
            --bg-gradient: linear-gradient(135deg, #f1f5f9 0%, #cbd5e1 100%);
        }

        html.dark {
            --accent: #60a5fa;
            --bg-gradient: radial-gradient(circle at top right, #1e293b, #0f172a);
        }

        body {
            background: var(--bg-gradient);
            min-height: 100vh;
            color: #1e293b;
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            overflow-x: hidden;
        }

        .dark body {
            color: #f1f5f9;
        }

        .glass {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .dark .glass {
            background: rgba(15, 23, 42, 0.6);
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        .glass-card {
            background: rgba(255, 255, 255, 0.4);
            backdrop-filter: blur(8px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
        }

        .dark .glass-card {
            background: rgba(30, 41, 59, 0.4);
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        .glass-card:hover {
            transform: translateY(-5px);
            background: rgba(255, 255, 255, 0.6);
            border-color: var(--accent);
        }

        .dark .glass-card:hover {
            background: rgba(30, 41, 59, 0.6);
            border-color: var(--accent);
        }

        /* Ambient Orbs */
        .orb {
            position: absolute;
            width: 400px;
            height: 400px;
            border-radius: 50%;
            filter: blur(80px);
            z-index: -1;
            opacity: 0.15;
            pointer-events: none;
        }

        .orb-1 {
            top: -100px;
            right: -100px;
            background: #3b82f6;
        }

        .orb-2 {
            bottom: -100px;
            left: -100px;
            background: #60a5fa;
        }

        .nav-link-active {
            color: var(--accent);
            position: relative;
        }

        .nav-link-active::after {
            content: '';
            position: absolute;
            bottom: -4px;
            left: 0;
            width: 100%;
            height: 2px;
            background: var(--accent);
            border-radius: 2px;
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: transparent;
        }

        ::-webkit-scrollbar-thumb {
            background: rgba(148, 163, 184, 0.2);
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: rgba(148, 163, 184, 0.4);
        }

        .text-gradient {
            background: linear-gradient(to right, #3b82f6, #60a5fa);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        @media print {

            nav,
            footer,
            .orb,
            .no-print,
            button {
                display: none !important;
            }

            body {
                background: white !important;
                color: black !important;
                padding: 0 !important;
            }

            main {
                padding-top: 0 !important;
                margin: 0 !important;
                max-width: 100% !important;
            }

            .glass,
            .glass-card {
                background: transparent !important;
                border: none !important;
                box-shadow: none !important;
                backdrop-filter: none !important;
            }

            .cv-content {
                color: black !important;
            }
        }
    </style>
</head>

<body>
    <div class="orb orb-1"></div>
    <div class="orb orb-2"></div>

    <div id="root">
        <div class="min-h-screen flex items-center justify-center">
            <div class="flex flex-col items-center gap-4">
                <div class="w-12 h-12 border-4 border-primary-500 border-t-transparent rounded-full animate-spin"></div>
                <p class="text-slate-500 font-medium">Iniciando experi√™ncia...</p>
            </div>
        </div>
    </div>

    <script type="text/babel">
        const { useState, useEffect, useRef, useMemo } = React;
        const { BrowserRouter, Switch, Route, Link, useLocation, useHistory } = ReactRouterDOM;
        const { motion, AnimatePresence } = window.Motion;

        // --- Navigation ---
        function Navigation({ theme, toggleTheme }) {
            const location = useLocation();
            const [tools, setTools] = useState([]);
            const [showTools, setShowTools] = useState(false);
            const [scrolled, setScrolled] = useState(false);

            useEffect(() => {
                const handleScroll = () => setScrolled(window.scrollY > 20);
                window.addEventListener('scroll', handleScroll);
                fetch('/tools').then(res => res.json()).then(setTools).catch(() => { });
                return () => window.removeEventListener('scroll', handleScroll);
            }, []);

            const isPageActive = (path) => location.pathname === path;

            return (
                <nav className={`fixed top-0 left-0 right-0 z-50 transition-all duration-300 ${scrolled ? 'py-4' : 'py-6'}`}>
                    <div className="max-w-5xl mx-auto px-6">
                        <div className={`glass rounded-2xl px-6 py-3 flex items-center justify-between shadow-lg shadow-black/5`}>
                            <Link to="/" className="flex items-center gap-2 group">
                                <div className="w-8 h-8 bg-primary-500 rounded-lg flex items-center justify-center text-white font-bold group-hover:rotate-12 transition-transform">
                                    B
                                </div>
                                <span className="font-bold text-lg hidden sm:block">Beto Schneider</span>
                            </Link>

                            <div className="flex items-center gap-1 md:gap-8">
                                <div className="flex items-center gap-1 md:gap-4 font-medium text-sm text-slate-500 dark:text-slate-400">
                                    <Link to="/" className={`px-3 py-2 rounded-lg hover:bg-black/5 dark:hover:bg-white/5 transition-colors ${isPageActive('/') ? 'text-primary-500 bg-primary-500/10' : ''}`}>Home</Link>
                                    <div className="relative group" onMouseEnter={() => setShowTools(true)} onMouseLeave={() => setShowTools(false)}>
                                        <Link to="/ferramentas" className={`px-3 py-2 rounded-lg hover:bg-black/5 dark:hover:bg-white/5 transition-colors flex items-center gap-1 ${isPageActive('/ferramentas') ? 'text-primary-500 bg-primary-500/10' : ''}`}>
                                            Apps <i className="fas fa-chevron-down text-[10px] mt-0.5"></i>
                                        </Link>
                                        <AnimatePresence>
                                            {showTools && (
                                                <motion.div
                                                    initial={{ opacity: 0, y: 10 }}
                                                    animate={{ opacity: 1, y: 0 }}
                                                    exit={{ opacity: 0, y: 10 }}
                                                    className="absolute top-full left-1/2 -translate-x-1/2 pt-2 w-56"
                                                >
                                                    <div className="glass rounded-xl shadow-2xl overflow-hidden py-1.5 border border-white/20">
                                                        {tools.length > 0 ? tools.map(t => (
                                                            <a key={t.id} href={t.url} target="_blank" className="flex items-center gap-3 px-4 py-2.5 text-sm hover:bg-primary-500/10 hover:text-primary-500 transition-colors">
                                                                <div className="w-6 h-6 rounded bg-slate-100 dark:bg-slate-800 flex items-center justify-center">
                                                                    <i className={`${t.icon || 'fas fa-link'} text-xs`}></i>
                                                                </div>
                                                                <span className="truncate">{t.name}</span>
                                                            </a>
                                                        )) : <div className="px-4 py-2 text-xs text-slate-400 text-center italic">Nada por aqui</div>}
                                                    </div>
                                                </motion.div>
                                            )}
                                        </AnimatePresence>
                                    </div>
                                    <Link to="/sobre" className={`px-3 py-2 rounded-lg hover:bg-black/5 dark:hover:bg-white/5 transition-colors ${isPageActive('/sobre') ? 'text-primary-500 bg-primary-500/10' : ''}`}>Sobre</Link>
                                    <Link to="/cv" className={`px-3 py-2 rounded-lg hover:bg-black/5 dark:hover:bg-white/5 transition-colors ${isPageActive('/cv') ? 'text-primary-500 bg-primary-500/10' : ''}`}>CV</Link>
                                    <Link to="/admin" className={`px-3 py-1 rounded-lg hover:bg-black/5 dark:hover:bg-white/5 transition-colors ${isPageActive('/admin') ? 'text-primary-500 bg-primary-500/10' : ''}`} title="Painel Admin">
                                        <i className="fas fa-lock text-[10px] opacity-40 hover:opacity-100 transition-opacity"></i>
                                    </Link>
                                </div>

                                <div className="w-px h-6 bg-slate-200 dark:bg-slate-700 mx-2 hidden sm:block"></div>

                                <div className="flex items-center gap-2">
                                    <button onClick={toggleTheme} className="w-10 h-10 rounded-xl bg-slate-100 dark:bg-slate-800 hover:bg-slate-200 dark:hover:bg-slate-700 text-slate-600 dark:text-yellow-400 flex items-center justify-center transition-colors">
                                        {theme === 'dark' ? <i className="fas fa-sun"></i> : <i className="fas fa-moon"></i>}
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </nav>
            );
        }

        // --- Layout Shell ---
        function Layout({ children, theme, toggleTheme }) {
            return (
                <div className="min-h-screen flex flex-col font-sans">
                    <Navigation theme={theme} toggleTheme={toggleTheme} />
                    <main className="flex-grow pt-32 pb-20 px-6 max-w-5xl mx-auto w-full">
                        <AnimatePresence mode="wait">
                            <motion.div
                                key={window.location.pathname}
                                initial={{ opacity: 0, y: 20 }}
                                animate={{ opacity: 1, y: 0 }}
                                exit={{ opacity: 0, y: -20 }}
                                transition={{ duration: 0.4, ease: "easeOut" }}
                            >
                                {children}
                            </motion.div>
                        </AnimatePresence>
                    </main>
                    <footer className="py-12 border-t border-slate-200 dark:border-white/5 text-center text-slate-500 text-sm">
                        <div className="max-w-5xl mx-auto px-6">
                            <p className="font-medium">&copy; {new Date().getFullYear()} Beto Schneider</p>
                            <p className="mt-1 opacity-60">Movido a FastAPI & uv</p>
                        </div>
                    </footer>
                </div>
            );
        }

        // --- Page: Home ---
        function Home() {
            const [profile, setProfile] = useState(null);
            const [projects, setProjects] = useState([]);
            const [loading, setLoading] = useState(true);

            useEffect(() => {
                fetch('/visit', { method: 'POST' });
                Promise.all([
                    fetch('/profile').then(res => res.json()),
                    fetch('/projects').then(res => res.json())
                ]).then(([p, projectsData]) => {
                    setProfile(p);
                    setProjects(projectsData);
                    setLoading(false);
                }).catch(() => setLoading(false));
            }, []);

            if (loading) return null;

            return (
                <div className="space-y-24">
                    {/* Hero Section */}
                    <section className="flex flex-col md:flex-row items-center gap-12 text-center md:text-left">
                        <div className="md:w-2/3 space-y-6">
                            <motion.div
                                initial={{ opacity: 0, x: -20 }}
                                animate={{ opacity: 1, x: 0 }}
                                className="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-primary-500/10 text-primary-500 text-xs font-bold uppercase tracking-wider"
                            >
                                <span className="relative flex h-2 w-2">
                                    <span className="animate-ping absolute inline-flex h-full w-full rounded-full bg-primary-400 opacity-75"></span>
                                    <span className="relative inline-flex rounded-full h-2 w-2 bg-primary-500"></span>
                                </span>
                                Dispon√≠vel para projetos
                            </motion.div>

                            <h1 className="text-5xl md:text-7xl font-bold tracking-tight">
                                Criando experi√™ncias <br />
                                <span className="text-gradient">digitais de alto n√≠vel.</span>
                            </h1>

                            <p className="text-xl text-slate-500 dark:text-slate-400 max-w-2xl leading-relaxed">
                                {profile?.description}
                            </p>

                            <div className="flex flex-wrap items-center justify-center md:justify-start gap-4 pt-4">
                                <Link to="/sobre" className="px-8 py-3.5 bg-primary-500 hover:bg-primary-600 text-white rounded-2xl font-bold shadow-lg shadow-primary-500/20 transition-all hover:-translate-y-1">
                                    Sobre Mim
                                </Link>
                                <div className="flex gap-4 px-2">
                                    {profile?.social_github && (
                                        <a href={profile.social_github} target="_blank" className="w-12 h-12 glass rounded-xl flex items-center justify-center text-xl hover:text-primary-500 transition-all hover:-translate-y-1">
                                            <i className="fab fa-github"></i>
                                        </a>
                                    )}
                                    {profile?.social_linkedin && (
                                        <a href={profile.social_linkedin} target="_blank" className="w-12 h-12 glass rounded-xl flex items-center justify-center text-xl hover:text-primary-500 transition-all hover:-translate-y-1">
                                            <i className="fab fa-linkedin"></i>
                                        </a>
                                    )}
                                </div>
                            </div>
                        </div>

                        <div className="md:w-1/3 flex justify-center">
                            <div className="relative">
                                <div className="absolute inset-0 bg-primary-500 rounded-[3rem] rotate-6 scale-95 opacity-20 blur-2xl"></div>
                                <img
                                    src={profile?.photo_url || `https://ui-avatars.com/api/?name=${profile?.name}&background=3b82f6&color=fff`}
                                    className="w-64 h-64 md:w-80 md:h-80 object-cover rounded-[3rem] border-4 border-white dark:border-slate-800 shadow-2xl relative z-10"
                                    alt={profile?.name}
                                />

                            </div>
                        </div>
                    </section>

                    {/* Stacks Bar */}
                    <div className="flex flex-wrap justify-center gap-3">
                        {profile?.stacks?.split(',').map((stack, i) => (
                            <span key={i} className="px-4 py-2 bg-slate-100 dark:bg-white/5 border border-slate-200 dark:border-white/5 rounded-xl text-sm font-medium">
                                {stack.trim()}
                            </span>
                        ))}
                    </div>

                    {/* Projects Grid */}
                    <section className="space-y-10">
                        <div className="flex items-end justify-between">
                            <div>
                                <h2 className="text-3xl font-bold">Projetos em Destaque</h2>
                                <p className="text-slate-500 dark:text-slate-400 mt-2">Uma sele√ß√£o do que ando construindo ultimamente.</p>
                            </div>
                            <Link to="/ferramentas" className="text-primary-500 font-bold flex items-center gap-2 hover:gap-3 transition-all">
                                Ver todos <i className="fas fa-arrow-right text-sm"></i>
                            </Link>
                        </div>

                        <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                            {projects.map((project, idx) => (
                                <motion.div
                                    key={project.id}
                                    initial={{ opacity: 0, y: 20 }}
                                    whileInView={{ opacity: 1, y: 0 }}
                                    viewport={{ once: true }}
                                    transition={{ delay: idx * 0.1 }}
                                    className="glass-card rounded-3xl p-8 flex flex-col justify-between h-full group"
                                >
                                    <div>
                                        <div className="flex justify-between items-start mb-6">
                                            <div className="w-12 h-12 bg-primary-500/10 rounded-2xl flex items-center justify-center text-primary-500 group-hover:bg-primary-500 group-hover:text-white transition-colors duration-500">
                                                <i className="fas fa-rocket text-xl"></i>
                                            </div>
                                            <div className="flex gap-3">
                                                {project.repo_url && (
                                                    <a
                                                        href={project.repo_url.startsWith('http') ? project.repo_url : `https://${project.repo_url}`}
                                                        target="_blank"
                                                        rel="noopener noreferrer"
                                                        className="p-2 text-slate-400 hover:text-slate-900 dark:hover:text-white transition-colors"
                                                    >
                                                        <i className="fab fa-github text-xl"></i>
                                                    </a>
                                                )}
                                            </div>
                                        </div>
                                        <h3 className="text-2xl font-bold mb-3">{project.title}</h3>
                                        <p className="text-slate-500 dark:text-slate-400 leading-relaxed mb-8">
                                            {project.description}
                                        </p>
                                    </div>
                                    <a href={project.url} target="_blank" className="flex items-center justify-center gap-2 w-full py-4 bg-slate-100 dark:bg-white/5 group-hover:bg-primary-500 text-slate-800 dark:text-white group-hover:text-white font-bold rounded-2xl transition-all duration-300">
                                        Explorar Projeto
                                        <i className="fas fa-external-link-alt text-xs opacity-50"></i>
                                    </a>
                                </motion.div>
                            ))}
                        </div>
                    </section>
                </div>
            );
        }

        // --- Page: About ---
        function About() {
            const [profile, setProfile] = useState(null);

            useEffect(() => {
                fetch('/profile').then(res => res.json()).then(setProfile);
            }, []);

            return (
                <div className="max-w-3xl mx-auto space-y-12">
                    <header className="space-y-4">
                        <h2 className="text-4xl font-bold tracking-tight">Sobre mim</h2>
                        <div className="h-1.5 w-20 bg-primary-500 rounded-full"></div>
                    </header>

                    <div className="glass-card rounded-[2.5rem] p-8 md:p-12 space-y-8">
                        <div className="prose prose-slate dark:prose-invert max-w-none text-lg text-slate-600 dark:text-slate-300 leading-relaxed">
                            {profile?.description?.split('\n').map((para, i) => (
                                <p key={i} className="mb-6">{para}</p>
                            ))}
                        </div>

                        <div className="grid md:grid-cols-2 gap-6 pt-6">
                            <div className="p-6 bg-slate-100 dark:bg-white/5 rounded-3xl border border-slate-200 dark:border-white/5">
                                <h3 className="font-bold text-lg mb-4 flex items-center gap-2">
                                    <i className="fas fa-laptop-code text-primary-500"></i> Tech Stack
                                </h3>
                                <ul className="space-y-3 text-sm font-medium">
                                    <li className="flex items-center justify-between">
                                        <span className="text-slate-500">Backend</span>
                                        <span className="text-primary-500 italic">FastAPI & SQLModel</span>
                                    </li>
                                    <li className="flex items-center justify-between">
                                        <span className="text-slate-500">Frontend</span>
                                        <span className="text-primary-500 italic">FastAPI & Python uv</span>
                                    </li>
                                    <li className="flex items-center justify-between">
                                        <span className="text-slate-500">Infra</span>
                                        <span className="text-primary-500 italic">Docker & Cloudflare</span>
                                    </li>
                                </ul>
                            </div>
                            <div className="p-6 bg-slate-100 dark:bg-white/5 rounded-3xl border border-slate-200 dark:border-white/5">
                                <h3 className="font-bold text-lg mb-4 flex items-center gap-2">
                                    <i className="fas fa-map-marker-alt text-primary-500"></i> Localiza√ß√£o
                                </h3>
                                <p className="text-slate-600 dark:text-slate-400 text-sm leading-relaxed">
                                    Baseado em <span className="font-bold text-slate-900 dark:text-white uppercase tracking-wider">{profile?.location}</span>. <br />
                                    Trabalhando remotamente com efici√™ncia para o mundo todo.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            );
        }

        // --- Page: Tools/Apps ---
        function Tools() {
            const [tools, setTools] = useState([]);
            const [loading, setLoading] = useState(true);

            useEffect(() => {
                fetch('/tools').then(res => res.json()).then(data => {
                    setTools(data);
                    setLoading(false);
                });
            }, []);

            return (
                <div className="space-y-12">
                    <header className="space-y-4">
                        <h2 className="text-4xl font-bold">Minhas Ferramentas</h2>
                        <p className="text-slate-500 max-w-xl">Aplica√ß√µes e utilities que constru√≠ para facilitar o dia a dia.</p>
                    </header>

                    <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
                        {tools.map(t => (
                            <motion.a
                                key={t.id}
                                href={t.url}
                                target="_blank"
                                whileHover={{ y: -8 }}
                                className="glass-card rounded-[2rem] p-8 group transition-all"
                            >
                                <div className="w-14 h-14 bg-primary-500/10 rounded-2xl flex items-center justify-center text-primary-500 mb-6 group-hover:scale-110 transition-transform">
                                    <i className={`${t.icon || 'fas fa-rocket'} text-2xl`}></i>
                                </div>
                                <h3 className="text-xl font-bold mb-2 flex items-center justify-between">
                                    {t.name}
                                    <i className="fas fa-external-link-alt text-[10px] opacity-0 group-hover:opacity-50 transition-opacity"></i>
                                </h3>
                                <p className="text-sm text-slate-500 dark:text-slate-400 line-clamp-2">
                                    {t.description || 'Uma ferramenta personalizada de alta performance.'}
                                </p>
                            </motion.a>
                        ))}
                    </div>
                    {tools.length === 0 && !loading && <div className="text-center py-20 text-slate-500 italic">Nenhum app dispon√≠vel no momento.</div>}
                </div>
            );
        }

        // --- Page: CV ---
        function CV() {
            const [markdown, setMarkdown] = useState('');
            const [loading, setLoading] = useState(true);

            useEffect(() => {
                fetch('/static/cv.md').then(res => res.text()).then(text => {
                    marked.setOptions({ breaks: true, gfm: true });
                    setMarkdown(marked.parse(text));
                    setLoading(false);
                });
            }, []);

            return (
                <div className="max-w-4xl mx-auto print:max-w-none print:m-0">
                    <div className="glass-card rounded-[3rem] p-8 md:p-16 relative overflow-hidden print:p-0 print:rounded-none">
                        <button
                            onClick={() => window.print()}
                            className="absolute top-0 right-0 w-32 h-32 bg-primary-500/10 rounded-bl-[4rem] flex items-center justify-center text-primary-500 hover:bg-primary-500/20 transition-colors group print:hidden"
                            title="Salvar como PDF / Imprimir"
                        >
                            <i className="fas fa-file-pdf text-3xl group-hover:scale-110 transition-transform"></i>
                        </button>
                        {loading ? (
                            <div className="flex justify-center py-20"><div className="w-8 h-8 border-4 border-primary-500 border-t-transparent rounded-full animate-spin"></div></div>
                        ) : (
                            <div className="cv-content prose prose-slate dark:prose-invert max-w-none
                                [&_h1]:text-4xl [&_h1]:font-bold [&_h1]:mb-8 [&_h1]:text-primary-500
                                [&_h2]:text-2xl [&_h2]:font-bold [&_h2]:mt-12 [&_h2]:mb-6 [&_h2]:border-b [&_h2]:pb-2 [&_h2]:border-slate-200 [&_h2]:dark:border-white/10
                                [&_h3]:text-xl [&_h3]:font-bold [&_h3]:mb-4
                                [&_p]:mb-4 [&_p]:text-slate-600 [&_p]:dark:text-slate-400 [&_p]:leading-relaxed
                                [&_ul]:list-disc [&_ul]:pl-6 [&_ul]:mb-6
                                [&_li]:mb-2 [&_li]:text-slate-600 [&_li]:dark:text-slate-400
                            " dangerouslySetInnerHTML={{ __html: markdown }}></div>
                        )}
                    </div>
                </div>
            );
        }

        // --- Admin Dashboard Support Components ---
        const Input = (props) => (
            <input {...props} className="w-full bg-slate-100 dark:bg-white/5 border border-slate-200 dark:border-white/10 rounded-xl p-3 outline-none focus:border-primary-500 transition-colors text-sm" />
        );

        const Label = ({ children }) => <label className="block text-xs font-bold text-slate-400 uppercase mb-1.5 ml-1">{children}</label>;

        // --- Admin Dashboard ---
        function Admin() {
            const [token, setToken] = useState(localStorage.getItem('admin_token') || '');
            const [isAuthenticated, setIsAuthenticated] = useState(false);
            const [activeTab, setActiveTab] = useState('projects');
            const [projects, setProjects] = useState([]);
            const [tools, setTools] = useState([]);
            const [profileForm, setProfileForm] = useState({});
            const [stats, setStats] = useState([]);

            const [newProject, setNewProject] = useState({ title: '', description: '', url: '', repo_url: '' });
            const [newTool, setNewTool] = useState({ name: '', url: '', description: '', icon: '' });
            const [editingId, setEditingId] = useState(null);
            const [editingToolId, setEditingToolId] = useState(null);
            const [msg, setMsg] = useState('');

            const verifyToken = async (t) => {
                const currentToken = t || token;
                try {
                    const res = await fetch('/admin/stats', { headers: { 'x-admin-token': currentToken } });
                    if (res.ok) {
                        setIsAuthenticated(true);
                        localStorage.setItem('admin_token', currentToken);
                        loadAllData();
                    } else {
                        setMsg('Token inv√°lido');
                        setIsAuthenticated(false);
                    }
                } catch (e) {
                    setMsg('Erro de conex√£o');
                }
            };

            const loadAllData = () => {
                const headers = { 'x-admin-token': localStorage.getItem('admin_token') };
                fetch('/projects').then(r => r.json()).then(setProjects);
                fetch('/tools').then(r => r.json()).then(setTools);
                fetch('/profile').then(r => r.json()).then(setProfileForm);
                fetch('/admin/stats', { headers }).then(r => r.json()).then(setStats);
            };

            useEffect(() => { if (token) verifyToken(); }, []);

            // Handlers
            const handleSaveProject = async (e) => {
                e.preventDefault();
                const method = editingId ? 'PUT' : 'POST';
                const url = editingId ? `/projects/${editingId}` : '/projects';
                const res = await fetch(url, {
                    method,
                    headers: { 'Content-Type': 'application/json', 'x-admin-token': token },
                    body: JSON.stringify(newProject)
                });

                if (res.ok) {
                    setNewProject({ title: '', description: '', url: '', repo_url: '' });
                    setEditingId(null);
                    loadAllData();
                } else {
                    const error = await res.json();
                    alert(`Erro ao salvar projeto: ${error.detail || 'Verifique se a URL come√ßa com http:// ou https://'}`);
                }
            };

            const handleSaveTool = async (e) => {
                e.preventDefault();
                const method = editingToolId ? 'PUT' : 'POST';
                const url = editingToolId ? `/tools/${editingToolId}` : '/tools';
                const res = await fetch(url, {
                    method,
                    headers: { 'Content-Type': 'application/json', 'x-admin-token': token },
                    body: JSON.stringify(newTool)
                });

                if (res.ok) {
                    setNewTool({ name: '', url: '', description: '', icon: '' });
                    setEditingToolId(null);
                    loadAllData();
                } else {
                    alert('Erro ao salvar ferramenta. Verifique os dados.');
                }
            };

            const handleUpdateProfile = async (e) => {
                e.preventDefault();
                const res = await fetch('/profile', {
                    method: 'PUT',
                    headers: { 'Content-Type': 'application/json', 'x-admin-token': token },
                    body: JSON.stringify(profileForm)
                });
                if (res.ok) {
                    alert('Perfil atualizado!');
                    loadAllData();
                } else {
                    alert('Erro ao atualizar perfil.');
                }
            };

            const deleteItem = async (type, id) => {
                if (!confirm('Tem certeza?')) return;
                await fetch(`/${type}/${id}`, { method: 'DELETE', headers: { 'x-admin-token': token } });
                loadAllData();
            };

            if (!isAuthenticated) return (
                <div className="max-w-md mx-auto glass-card p-10 rounded-[2.5rem] shadow-2xl">
                    <div className="w-16 h-16 bg-primary-500/10 rounded-2xl flex items-center justify-center text-primary-500 mx-auto mb-6 text-2xl">
                        <i className="fas fa-lock"></i>
                    </div>
                    <h2 className="text-2xl font-bold mb-2 text-center">Acesso Restrito</h2>
                    <p className="text-slate-500 text-center mb-8 text-sm">Insira o token para gerenciar o portf√≥lio.</p>
                    <input
                        type="password"
                        value={token}
                        onChange={e => setToken(e.target.value)}
                        className="w-full bg-slate-100 dark:bg-white/5 border border-slate-200 dark:border-white/10 rounded-2xl p-4 mb-4 outline-none focus:ring-2 focus:ring-primary-500 transition-all font-mono"
                        placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"
                    />
                    <button onClick={() => verifyToken()} className="w-full py-4 bg-primary-500 text-white font-bold rounded-2xl hover:bg-primary-600 shadow-lg shadow-primary-500/20 transition-all active:scale-95">
                        Acessar Painel
                    </button>
                    {msg && <motion.p initial={{ opacity: 0 }} animate={{ opacity: 1 }} className="text-red-500 mt-4 text-center text-sm font-medium">{msg}</motion.p>}
                </div>
            );



            return (
                <div className="space-y-8 animate-fade-in">
                    <header className="flex flex-col md:flex-row justify-between items-start md:items-center gap-4">
                        <div>
                            <h2 className="text-3xl font-bold">Admin Dashboard</h2>
                            <p className="text-slate-500 text-sm">Gerencie o conte√∫do do seu portf√≥lio em tempo real.</p>
                        </div>
                        <button onClick={() => { localStorage.removeItem('admin_token'); location.reload(); }} className="px-4 py-2 bg-red-500/10 text-red-500 hover:bg-red-500 hover:text-white rounded-xl text-xs font-bold transition-all flex items-center gap-2">
                            <i className="fas fa-sign-out-alt"></i> Sair
                        </button>
                    </header>

                    <div className="flex bg-slate-100 dark:bg-white/5 rounded-2xl p-1.5 w-fit border border-slate-200 dark:border-white/5">
                        {['projects', 'tools', 'profile', 'stats'].map(t => (
                            <button
                                key={t}
                                onClick={() => setActiveTab(t)}
                                className={`px-6 py-2.5 rounded-xl text-sm font-bold transition-all ${activeTab === t ? 'bg-white dark:bg-slate-800 text-primary-500 shadow-sm' : 'text-slate-500 hover:text-slate-900 dark:hover:text-white'}`}
                            >
                                {t === 'projects' ? 'Projetos' : t === 'tools' ? 'Ferramentas' : t === 'profile' ? 'Perfil' : 'Stats'}
                            </button>
                        ))}
                    </div>

                    <div className="glass-card rounded-[2.5rem] p-8 md:p-10">
                        {/* PROJECTS TAB */}
                        {activeTab === 'projects' && (
                            <div className="space-y-10">
                                <form onSubmit={handleSaveProject} className="grid grid-cols-1 md:grid-cols-2 gap-4 bg-slate-50 dark:bg-white/5 p-6 rounded-3xl border border-slate-100 dark:border-white/5">
                                    <div className="col-span-full flex justify-between items-center mb-2">
                                        <h3 className="font-bold">{editingId ? 'Editar Projeto' : 'Novo Projeto'}</h3>
                                        {editingId && <button type="button" onClick={() => { setEditingId(null); setNewProject({ title: '', description: '', url: '', repo_url: '' }); }} className="text-xs text-primary-500 font-bold">Cancelar</button>}
                                    </div>
                                    <div className="space-y-1"><Label>T√≠tulo</Label><Input required value={newProject.title} onChange={e => setNewProject({ ...newProject, title: e.target.value })} /></div>
                                    <div className="space-y-1"><Label>URL Repo (Github/Gitlab)</Label><Input value={newProject.repo_url} onChange={e => setNewProject({ ...newProject, repo_url: e.target.value })} placeholder="https://github.com/..." /></div>
                                    <div className="col-span-full space-y-1"><Label>URL Deploy (Inicie com http:// ou https://)</Label><Input required value={newProject.url} onChange={e => setNewProject({ ...newProject, url: e.target.value })} placeholder="https://exemplo.com" /></div>
                                    <div className="col-span-full space-y-1"><Label>Descri√ß√£o</Label><textarea value={newProject.description} onChange={e => setNewProject({ ...newProject, description: e.target.value })} className="w-full bg-slate-100 dark:bg-white/5 border border-slate-200 dark:border-white/10 rounded-xl p-3 outline-none focus:border-primary-500 transition-colors text-sm min-h-[100px]" /></div>
                                    <button type="submit" className="col-span-full py-3 bg-primary-500 text-white font-bold rounded-xl shadow-lg shadow-primary-500/20">{editingId ? 'Salvar Altera√ß√µes' : 'Adicionar Projeto'}</button>
                                </form>

                                <div className="grid grid-cols-1 gap-3">
                                    {projects.map(p => (
                                        <div key={p.id} className="flex flex-col sm:flex-row justify-between items-center bg-white dark:bg-slate-800/50 p-4 rounded-2xl border border-slate-100 dark:border-white/5 group">
                                            <div>
                                                <h4 className="font-bold">{p.title}</h4>
                                                <p className="text-xs text-slate-400 truncate max-w-xs">{p.url}</p>
                                            </div>
                                            <div className="flex gap-2">
                                                <button onClick={() => { setEditingId(p.id); setNewProject(p); }} className="w-10 h-10 rounded-xl bg-primary-500/10 text-primary-500 flex items-center justify-center hover:bg-primary-500 hover:text-white transition-all"><i className="fas fa-edit"></i></button>
                                                <button onClick={() => deleteItem('projects', p.id)} className="w-10 h-10 rounded-xl bg-red-500/10 text-red-500 flex items-center justify-center hover:bg-red-500 hover:text-white transition-all"><i className="fas fa-trash"></i></button>
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            </div>
                        )}

                        {/* TOOLS TAB */}
                        {activeTab === 'tools' && (
                            <div className="space-y-10">
                                <form onSubmit={handleSaveTool} className="grid grid-cols-1 md:grid-cols-2 gap-4 bg-slate-50 dark:bg-white/5 p-6 rounded-3xl border border-slate-100 dark:border-white/5">
                                    <div className="col-span-full flex justify-between items-center mb-2">
                                        <h3 className="font-bold">{editingToolId ? 'Editar Ferramenta' : 'Nova Ferramenta'}</h3>
                                        {editingToolId && <button type="button" onClick={() => { setEditingToolId(null); setNewTool({ name: '', url: '', description: '', icon: '' }); }} className="text-xs text-primary-500 font-bold">Cancelar</button>}
                                    </div>
                                    <div className="space-y-1"><Label>Nome</Label><Input required value={newTool.name} onChange={e => setNewTool({ ...newTool, name: e.target.value })} /></div>
                                    <div className="space-y-1"><Label>√çcone (FontAwesome)</Label><Input value={newTool.icon} onChange={e => setNewTool({ ...newTool, icon: e.target.value })} placeholder="fas fa-wrench" /></div>
                                    <div className="col-span-full space-y-1"><Label>URL</Label><Input required value={newTool.url} onChange={e => setNewTool({ ...newTool, url: e.target.value })} /></div>
                                    <div className="col-span-full space-y-1"><Label>Descri√ß√£o</Label><Input value={newTool.description} onChange={e => setNewTool({ ...newTool, description: e.target.value })} /></div>
                                    <button type="submit" className="col-span-full py-3 bg-primary-500 text-white font-bold rounded-xl shadow-lg shadow-primary-500/20">Salvar Ferramenta</button>
                                </form>

                                <div className="grid grid-cols-1 sm:grid-cols-2 gap-4">
                                    {tools.map(t => (
                                        <div key={t.id} className="flex justify-between items-center bg-white dark:bg-slate-800/50 p-4 rounded-2xl border border-slate-100 dark:border-white/5">
                                            <div className="flex items-center gap-3">
                                                <div className="w-10 h-10 bg-primary-500/10 text-primary-500 rounded-lg flex items-center justify-center"><i className={t.icon || 'fas fa-link'}></i></div>
                                                <h4 className="font-bold text-sm">{t.name}</h4>
                                            </div>
                                            <div className="flex gap-2">
                                                <button onClick={() => { setEditingToolId(t.id); setNewTool(t); }} className="text-primary-500 hover:scale-110 transition-transform"><i className="fas fa-edit"></i></button>
                                                <button onClick={() => deleteItem('tools', t.id)} className="text-red-500 hover:scale-110 transition-transform"><i className="fas fa-trash"></i></button>
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            </div>
                        )}

                        {/* PROFILE TAB */}
                        {activeTab === 'profile' && (
                            <form onSubmit={handleUpdateProfile} className="space-y-6">
                                <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                                    <div className="space-y-2"><Label>Nome Completo</Label><Input value={profileForm.name || ''} onChange={e => setProfileForm({ ...profileForm, name: e.target.value })} /></div>
                                    <div className="space-y-2"><Label>Cargo / T√≠tulo</Label><Input value={profileForm.role || ''} onChange={e => setProfileForm({ ...profileForm, role: e.target.value })} /></div>
                                    <div className="space-y-2"><Label>Localiza√ß√£o</Label><Input value={profileForm.location || ''} onChange={e => setProfileForm({ ...profileForm, location: e.target.value })} /></div>
                                    <div className="space-y-2"><Label>URL da Foto</Label><Input value={profileForm.photo_url || ''} onChange={e => setProfileForm({ ...profileForm, photo_url: e.target.value })} /></div>
                                    <div className="space-y-2"><Label>LinkedIn</Label><Input value={profileForm.social_linkedin || ''} onChange={e => setProfileForm({ ...profileForm, social_linkedin: e.target.value })} /></div>
                                    <div className="space-y-2"><Label>GitHub</Label><Input value={profileForm.social_github || ''} onChange={e => setProfileForm({ ...profileForm, social_github: e.target.value })} /></div>
                                    <div className="col-span-full space-y-2"><Label>Stacks (Separe por v√≠rgula)</Label><Input value={profileForm.stacks || ''} onChange={e => setProfileForm({ ...profileForm, stacks: e.target.value })} /></div>
                                    <div className="col-span-full space-y-2">
                                        <div className="flex justify-between">
                                            <Label>Bio / Descri√ß√£o Home</Label>
                                            <span className="text-[10px] text-primary-500 font-bold">Aparece em destaque na Home</span>
                                        </div>
                                        <textarea
                                            value={profileForm.description || ''}
                                            onChange={e => setProfileForm({ ...profileForm, description: e.target.value })}
                                            className="w-full bg-slate-100 dark:bg-white/5 border border-slate-200 dark:border-white/10 rounded-2xl p-4 outline-none focus:ring-2 focus:ring-primary-500 transition-all text-sm min-h-[150px]"
                                            placeholder="Sua bio completa aqui..."
                                        />
                                    </div>
                                </div>
                                <button type="submit" className="w-full py-4 bg-primary-500 text-white font-bold rounded-2xl shadow-xl shadow-primary-500/20 hover:scale-[1.01] transition-all">Salvar Perfil</button>
                            </form>
                        )}

                        {/* STATS TAB */}
                        {activeTab === 'stats' && (
                            <div className="space-y-6">
                                <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
                                    <div className="p-4 bg-primary-500/5 rounded-2xl border border-primary-500/10">
                                        <p className="text-[10px] uppercase font-bold text-slate-400">Total Visitas (90d)</p>
                                        <p className="text-2xl font-bold text-primary-500">{stats.reduce((acc, s) => acc + s.total, 0)}</p>
                                    </div>
                                </div>
                                <div className="overflow-x-auto rounded-2xl border border-slate-100 dark:border-white/5">
                                    <table className="w-full text-left">
                                        <thead className="bg-slate-50 dark:bg-white/5 text-slate-400 text-[10px] uppercase tracking-wider font-bold">
                                            <tr>
                                                <th className="py-4 px-6">Data</th>
                                                <th className="py-4 px-6 text-center">Total</th>
                                                <th className="py-4 px-6 text-center">PC</th>
                                                <th className="py-4 px-6 text-center">Mobile</th>
                                            </tr>
                                        </thead>
                                        <tbody className="divide-y divide-slate-100 dark:divide-white/5">
                                            {stats.map((s, i) => (
                                                <tr key={i} className="text-sm hover:bg-slate-50 dark:hover:bg-white/5 transition-colors">
                                                    <td className="py-4 px-6 font-medium">{s.date}</td>
                                                    <td className="py-4 px-6 text-center font-bold text-primary-500">{s.total}</td>
                                                    <td className="py-4 px-6 text-center">{s.pc}</td>
                                                    <td className="py-4 px-6 text-center">{s.smartphone}</td>
                                                </tr>
                                            ))}
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        )}
                    </div>
                </div>
            );
        }

        // --- Main App ---
        function App() {
            const [theme, setTheme] = useState(localStorage.getItem('theme') || 'dark');

            useEffect(() => {
                const el = document.documentElement;
                if (theme === 'dark') el.classList.add('dark');
                else el.classList.remove('dark');
                localStorage.setItem('theme', theme);
            }, [theme]);

            const toggleTheme = () => setTheme(prev => prev === 'dark' ? 'light' : 'dark');

            return (
                <BrowserRouter>
                    <Layout theme={theme} toggleTheme={toggleTheme}>
                        <Switch>
                            <Route exact path="/" component={Home} />
                            <Route path="/sobre" component={About} />
                            <Route path="/ferramentas" component={Tools} />
                            <Route path="/cv" component={CV} />
                            <Route path="/admin" component={Admin} />
                        </Switch>
                    </Layout>
                </BrowserRouter>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>

</html>